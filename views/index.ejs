<!DOCTYPE html>  
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title><%= title %></title>

    <meta name="description" content="<%= title %>">
    <meta name="author" content="Joe McCann">
    
    <link href='css/lato.css' rel='stylesheet' type='text/css'>
    <link href='css/style.css' rel='stylesheet' type='text/css'>
  </head>
<body>
  <section id="main">
    <h1>THE CURRENT TOTAL NUMBER OF NPM MODULES IS:  <span class="npm-module-count"></span></h1>  
    <div>
      <button class="button" id="refresh">How about now?</button>
    </div>
  </section>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
  </script>
  
  <script>
  
  function getNpmCount(){
    
    $('#refresh').attr('disabled', true).addClass('lowpacity')
    
    $('.npm-module-count').text('')
    
    $.getJSON('/get_npm_count?callback=?', function(json){

      $('.npm-module-count').text(json.totalModules)

      $('#refresh').attr('disabled', false).removeClass('lowpacity')
      
    })
    
    return false
    
  }
  
  $(function(){
    
    getNpmCount()
    
    $('#refresh').bind('click', getNpmCount)
    
  })
  </script>
  <!--
  
    This simple node app is free and open source.
    
    https://github.com/joemccann/npm-module-count
    
   -->
</body>